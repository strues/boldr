{"version":3,"sources":["src/cli.js"],"names":[],"mappings":";;AAEA;;;;AACA;;;;AACA;;;;AACA;;AASA;;;;;;AAEA,8BAAe,EAAE,sBAAF,EAAf,EAAwB,MAAxB;AACA,QAAQ,EAAR,CAAW,oBAAX,EAAiC,OAAO;AACtC,QAAM,GAAN;AACD,CAFD;AAGA,MAAM,UAAU,kBAAI,OAApB;AACA;AAGE;AAHF,CAAQ,MAAR,GAAiB,SAAU,OAAO,KAAP,KAAiB,QAAjB,GAA4B,KAA5B,GAAoC,IAA/D;;AAEA,kBAEG,OAFH,CAEW,OAFX,EAGG,WAHH,CAGe,uDAHf;;AAKA,kBAAQ,OAAR,CAAgB,SAAhB,EAA2B,0BAA3B,EAAuD,KAAvD,CAA6D,KAA7D,EAAoE,MAApE,CAA2E,MAAM;AAC/E,MAAI;AACF,UAAM,QAAQ,CAAC,MAAM,yBAAP,EAAsB,MAAM,yBAA5B,EAA2C,MAAM,4BAAjD,CAAd;;AAEA,2BAAQ,KAAR,EACG,IADH,CACQ,UAAU;AACd,cAAQ,GAAR,CAAY,MAAZ;AACD,KAHH,EAIG,KAJH,CAIS,OAAO,QAAQ,GAAR,CAAY,GAAZ,CAJhB;AAKA;AACA;AACA;AACD,GAXD,CAWE,OAAO,KAAP,EAAc;AACd,YAAQ,GAAR,CAAY,KAAZ;AACA,YAAQ,IAAR,CAAa,CAAb;AACD;AACF,CAhBD;AAiBA,kBAAQ,OAAR,CAAgB,OAAhB,EAAyB,sBAAzB,EAAiD,MAAjD,CAAwD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAG7C,KAH6C,EAGtC;AAAA;AACd,cAAQ,GAAR,CAAY,KAAZ;AACA,cAAQ,IAAR,CAAa,CAAb;AAFc;AAAA;AAAA;AAAA;AAGf,GANqD;AACtD,MAAI;AACW,2BAAM,yBAAN;AAAA;AAAqB,+BAAM,yBAAN;AAAA;AAAlC,oBAAQ,GAAR,CAAY,CAAC,QAAD,EAAsB,QAAtB,CAAZ,EAAwD,KAAxD,CAA8D,OAAO,QAAQ,GAAR,CAAY,GAAZ,CAArE;AAAkC;AAAA;AAAA;AAAA;AAAA;AAArB;AAAA;AAAA;AAAA;AACd,GAFD,CAEE,OAAO,KAAP,EAAc;AAAA,iBAAP,KAAO;AAGf;AANqD,aAAxD;AAQA,kBAAQ,OAAR,CAAgB,OAAhB,EAAyB,oDAAzB,EAA+E,MAA/E,CAAsF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAQ3E,KAR2E,EAQpE;AAAA;AACd,cAAQ,GAAR,CAAY,KAAZ;AACA,cAAQ,IAAR,CAAa,CAAb;AAFc;AAAA;AAAA;AAAA;AAGf,GAXmF;AACpF,MAAI;AAEA,2BAAM,yBAAN;AAAA;AACA,+BAAM,yBAAN;AAAA;AACA,mCAAM,yBAAN;AAAA;AACA,uCAAM,yBAAN;AAAA;AAJF,4BAAQ,GAAR,CAAY,CACV,QADU,EAEV,QAFU,EAGV,QAHU,EAIV,SAJU,CAAZ,EAKG,KALH,CAKS,OAAO,QAAQ,GAAR,CAAY,GAAZ,CALhB;AAIE;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAKH,GAPD,CAOE,OAAO,KAAP,EAAc;AAAA,iBAAP,KAAO;AAGf;AAXmF,aAAtF;AAaA,kBAAQ,OAAR,CAAgB,WAAhB,EAA6B,gDAA7B,EAA+E,MAA/E,CAAsF,MAAM;AAC1F,MAAI;AACF;AACD,GAFD,CAEE,OAAO,KAAP,EAAc;AACd,YAAQ,GAAR,CAAY,KAAZ;AACA,YAAQ,IAAR,CAAa,CAAb;AACD;AACF,CAPD;;AASA,kBAAQ,KAAR,CAAc,QAAQ,IAAtB","file":"boldr.js","sourcesContent":["\n\nimport program from 'caporal';\nimport updateNotifier from 'update-notifier';\nimport pSeries from 'p-series';\nimport {\n  cleanClient,\n  cleanServer,\n  startRenderServer,\n  buildClient,\n  buildServer,\n  startDevServer,\n} from '@boldr/tools';\n\nimport pkg from '../package.json';\n\nupdateNotifier({ pkg }).notify();\nprocess.on('unhandledRejection', err => {\n  throw err;\n});\nconst VERSION = pkg.version;\nprogram.STRING = value => (typeof value === 'string' ? value : null);\n\nprogram\n  // default command\n  .version(VERSION)\n  .description('A command line scaffolding tool and helper for Boldr.');\n\nprogram.command('develop', 'Start development server').alias('dev').action(() => {\n  try {\n    const tasks = [() => cleanClient(), () => cleanServer(), () => startDevServer()];\n\n    pSeries(tasks)\n      .then(result => {\n        console.log(result);\n      })\n      .catch(err => console.log(err));\n    // Promise.all([await cleanClient(), await cleanServer(), await startDevServer()]).catch(err =>\n    //   console.log(err),\n    // );\n  } catch (error) {\n    console.log(error);\n    process.exit(1);\n  }\n});\nprogram.command('clean', 'Clean compiled files').action(async () => {\n  try {\n    Promise.all([await cleanClient(), await cleanServer()]).catch(err => console.log(err));\n  } catch (error) {\n    console.log(error);\n    process.exit(1);\n  }\n});\nprogram.command('build', 'Build the client and server bundles for production').action(async () => {\n  try {\n    Promise.all([\n      await cleanClient(),\n      await cleanServer(),\n      await buildClient(),\n      await buildServer(),\n    ]).catch(err => console.log(err));\n  } catch (error) {\n    console.log(error);\n    process.exit(1);\n  }\n});\nprogram.command('start:ssr', 'Start the application rendernig on the server.').action(() => {\n  try {\n    startRenderServer();\n  } catch (error) {\n    console.log(error);\n    process.exit(1);\n  }\n});\n\nprogram.parse(process.argv);\n"]}